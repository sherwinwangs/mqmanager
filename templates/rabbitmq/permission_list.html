{% extends '_base_list.html' %}
{% load common_tags %}

{% block table_head %}
    <td align="center">环境</td>
    <td align="center">虚拟主机</td>
    <td align="center">用户名</td>
    <td align="center">可配置</td>
    <td align="center">可写入</td>
    <td align="center">可读取</td>
    <td align="center">操作</td>
{% endblock %}

{% block table_body %}
    {% for i in permission_list %}
            <tr>
                <td align="center">{{ r_data.cluster |env_name}}</td>
                <td align="center">{{ i.vhost }}</td>
                <td align="center">{{ i.user }}</td>
                <td align="center">{{ i.configure }}</td>
                <td align="center">{{ i.write }}</td>
                <td align="center">{{ i.read }}</td>
                <td align="center">
                    <a href="#" class="btn btn-xs btn-danger">删除</a>
                </td>
            </tr>
    {% endfor %}
{% endblock %}
{% block custom_foot_js %}
    <script>
        $(document).ready(function () {
            $('.dataTables-example').DataTable({
                pageLength: 10,
                responsive: false,
                //dom: '<"html5buttons"B>lTfgitp',
                //dom: '<"html5buttons"B><"top"f>rt<"bottom"pli><"clear">',
                dom: 'Blfrtip',
                bStateSave: true,
                buttons: [
                    {text: '添加权限', action: function (e, dt, button, config) { window.location = '{% url 'permission-add' %}?cluster={{ r_data.cluster }}&vhost={{ r_data.vhost }}'; } },
                    {extend: 'copy',text: '复制到剪贴板'},
                    {extend: 'csv',text:'导出CSV',title: '权限搜索结果'},
                    {extend: 'excel', text:'导出EXCEL',title: '权限搜索结果'},
                ], "oLanguage": { // 国际化配置
                    "sProcessing": "正在获取数据，请稍后...",
                    "sLengthMenu": "显示 _MENU_ 条",
                    "sZeroRecords": "没有找到数据",
                    "sInfo": "从 _START_ 到  _END_ 条记录 总记录数为 _TOTAL_ 条",
                    "sInfoEmpty": "记录数为0",
                    "sInfoFiltered": "(全部记录数 _MAX_ 条)",
                    "sInfoPostFix": "",
                    "sSearch": "搜索",
                    "sUrl": "",
                    "oPaginate": {
                        "sFirst": "第一页",
                        "sPrevious": "上一页",
                        "sNext": "下一页",
                        "sLast": "最后一页"
                    }
                }

            });

        });
    </script>
{% endblock %}